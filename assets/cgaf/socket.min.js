function Socket($config$$){cgaf.log($config$$);var $_listen$$=false,$_instance$$=null;this.config=$.extend({},$config$$||{});if(typeof $WebSocket$$==="undefined")var $WebSocket$$=function $$WebSocket$$$($config$$){if(typeof $config$$==="string")$config$$={url:$config$$};this.config=$.extend({url:null,timeout:1E3},$config$$||{});this.onclose=this.onmessage=this.onopen=this._t=null;this.readyState=0;var $isOpen$$=false,$me$$=this;this.Open=function $this$Open$(){if(!$isOpen$$){$isOpen$$=true;var $_onRefresh$$=
false;$me$$._t=setInterval(function doRefresh(){if(!$_onRefresh$$){$_onRefresh$$=true;console.log($me$$.config);$_onRefresh$$=false}},$me$$.config.timeout)}};this.Close=function $this$Close$(){this._t&&clearInterval($me$$._t)};return this};var $me$$=this;return{listen:function(){if(!$_listen$$){if(!$_instance$$)if(typeof $WebSocket$$!="undefined"){try{$_instance$$=new $WebSocket$$($me$$.config.url);typeof $_instance$$.Open!=="undefined"&&$_instance$$.Open()}catch($ex$$){cgaf.log($ex$$)}$("msg").focus();
cgaf.log("WebSocket - status "+$_instance$$.readyState)}if($_instance$$){$_instance$$.onopen=function $$_instance$$$onopen$(){cgaf.log("Welcome - status "+this.readyState)};$_instance$$.onmessage=function $$_instance$$$onmessage$($msg$$){cgaf.log("Received: "+$msg$$.data)};$_instance$$.onclose=function $$_instance$$$onclose$(){cgaf.log("Disconnected - status "+this.readyState)}}$_listen$$=true}}}};
