(function(){function $getClassFromAttr$$($classAttr_classList$$){var $retval$$=[];if($classAttr_classList$$!=null&&$classAttr_classList$$!=undefined){$classAttr_classList$$=$classAttr_classList$$.split(/\s+/);for(var $ix$$=0,$len$$=$classAttr_classList$$.length;$ix$$<$len$$;$ix$$++)$classAttr_classList$$[$ix$$].substring(0,5)==="cgaf-"&&$retval$$.push($classAttr_classList$$[$ix$$].substring(5))}return $retval$$}var $url$$=cgaf.url($("#cgaf-jsapi").attr("src")),$apikey$$=$url$$.param("key"),$oriUrl$$=
$url$$.attr("base");console.log($oriUrl$$);var $like$$=function $$like$$$($el$$0$$,$config$$){$config$$=$.extend({type:"url",item:null},$config$$||{});if($config$$.type=="url")$config$$.item=encodeURIComponent(document.location.href);var $like$$=function $$like$$$($el$$,$config$$){$el$$=this.el=$($el$$);var $lurl$$=this.lurl=cgaf.url($oriUrl$$+"/api/like/",{_key:$apikey$$,item:$config$$.item,type:$config$$.type,__data:"json"}),$self$$=this;$el$$.addClass("cg-like");$('<span class="thumb"></span>').appendTo($el$$);
$('<span class="like">like</span>').appendTo($el$$).click(function($e$$){$e$$.preventDefault();if(!$(this).data("like")){var $me$$=$(this);$me$$.data("like",true);$me$$.load(cgaf.url($lurl$$.toString(),{method:"like"}).toString(),function(){$me$$.removeClass("text");$me$$.addClass("liked");$self$$.update()})}});$('<span class="count"></span>').appendTo($el$$);this.update();return this};$like$$.prototype.update=function $$like$$$$update$(){this.el.find(".count").load(cgaf.url(this.lurl.toString(),
{method:"resume"}).toString(),function(){console.log(arguments)})};return new $like$$($el$$0$$,$config$$)};$.fn.cglike=function $$$fn$cglike$($config$$){if($(this).data("cg-like"))return $(this).data("cg-like");this.each(function(){$(this).data("cg-like")||$(this).data("cg-like",new $like$$(this,$config$$))})};$('[class^="cgaf-"]').each(function($idx$$,$item$$){$l=$getClassFromAttr$$($(this).attr("class"));$.each($l,function($i$$,$ii$$){switch($ii$$){case "like":cgaf.loadStyleSheet($oriUrl$$+"/asset/?q=like.css");
$($item$$).cglike({})}})})})();
